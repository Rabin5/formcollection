{% extends 'core/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
  कोभिड अस्पतालका लागि प्रश्नावलीहरू - Nepal Audit Management System
{% endblock title %}

{% block page_title %}
कोभिड अस्पतालका लागि प्रश्नावलीहरू
{% endblock page_title %}

{% block page_actions %}
  <a class="btn btn-success btn-with-icon" href='{% url "cov_hos_forms:create" %}'>
    <i class="ic-add"></i>
    प्रश्नावलीहरू भर्नुहोस्
  </a>
{% endblock page_actions %}

{% block content %}
<table class="table table-striped table-borderless">
  <thead>
    <tr>
      <th>#.</th>
      <th>State</th>
      <th>Status</th>
      <th class="text-right">कार्य</th>
    </tr>
  </thead>
  <tbody>
    {% for form_collection in form_collections %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ form_collection }}</td>
        <td>{{ form_collection.get_status_display }}</td>
        {% if form_collection.get_status_display == 'SUBMITTED' %}
          <td>
            <a href="{% url 'cov_hos_forms:review' form_collection.pk 'submitted' %}">
              Review
            </a>
          </td>
        {% elif form_collection.get_status_display not in 'APPROVED, REJECTED' %}
          <td class="action">
            <a href="{% url 'cov_hos_forms:cov_hos_update' form_collection.pk %}">
              <i class="ic-edit mr-2"></i>
            </a>
            <a data-remote="{% url 'cov_hos_forms:cov_hos_delete' form_collection.pk %}"
              href="{% url 'cov_hos_forms:cov_hos_delete' form_collection.pk %}" data-toggle="modal" data-target="#modalProdDelete">
              <i class="ic-delete"></i>
            </a>
          </td>
        {% endif %}
        
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock content %}

{% block modal %}

<div class="modal fade" id="modalProdDelete" tabindex="-1" role="dialog" aria-labelledby="modalProdDelete" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
    </div>
  </div>
</div>

{% endblock %}

{% block extrascripts %}
<script>
    $('#modalProdDelete').on('shown.bs.modal', function (e) {
      var button = $(e.relatedTarget);
      var modal = $(this);
      modal.find('.modal-content').load(button.data("remote"));
    });
})
</script>
{% endblock extrascripts %}
